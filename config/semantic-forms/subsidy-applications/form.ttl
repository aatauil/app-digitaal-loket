@prefix form: <http://lblod.data.gift/vocabularies/forms/> .
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix mu: <http://mu.semte.ch/vocabularies/core/> .
@prefix fieldGroups: <http://data.lblod.info/field-groups/> .
@prefix fields: <http://data.lblod.info/fields/> .
@prefix displayTypes: <http://lblod.data.gift/display-types/> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#>.
@prefix schema: <http://schema.org/>.
@prefix foaf: <http://xmlns.com/foaf/0.1/>.
@prefix lblodSubsidie: <http://lblod.data.gift/vocabularies/subsidie/>.
@prefix dct: <http://purl.org/dc/terms/>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.

##########################################################
# Property groups
##########################################################

fields:4558f2d6-1ba4-4211-beb9-5e3a4b65b975 a form:PropertyGroup;
    mu:uuid "4558f2d6-1ba4-4211-beb9-5e3a4b65b975";
    sh:description "parent property-group, used to group fields and property-groups together";
    sh:order 1 .

fields:2232cd10-01d6-4f67-966a-2c22932437b4 a form:PropertyGroup;
    mu:uuid "2232cd10-01d6-4f67-966a-2c22932437b4";
    sh:description "contact person information";
    sh:order 3;
    sh:name "Contactgegevens" ;
    sh:group fields:4558f2d6-1ba4-4211-beb9-5e3a4b65b975 .

fields:386530d7-b4b4-41c9-8146-e2d8d629d77f a form:PropertyGroup;
    mu:uuid "386530d7-b4b4-41c9-8146-e2d8d629d77f";
    sh:description "payment";
    sh:order 4;
    sh:name "Betaling" ;
    sh:group fields:4558f2d6-1ba4-4211-beb9-5e3a4b65b975 .

fields:7e84b8db-1198-4585-a0a2-e5bc48af3f08 a form:PropertyGroup;
    mu:uuid "7e84b8db-1198-4585-a0a2-e5bc48af3f08";
    sh:description "application form";
    sh:order 5;
    sh:name "Aanvraagformulier" ;
    sh:group fields:4558f2d6-1ba4-4211-beb9-5e3a4b65b975 .

##########################################################
# Contact person info
##########################################################

fields:e19e245a-c24b-4fb5-84b8-a7e2744ce9a0 a form:Field ;
    mu:uuid "e19e245a-c24b-4fb5-84b8-a7e2744ce9a0";
    sh:name "Voornaam contactpersoon" ;
    sh:order 30 ;
    sh:path ( schema:contactPoint foaf:firstName ) ;
    form:validations
    [ a form:RequiredConstraint ;
        form:grouping form:Bag ;
        sh:path ( schema:contactPoint foaf:firstName ) ;
        sh:resultMessage "Dit veld is verplicht."@nl
    ] ;
    form:displayType displayTypes:defaultInput ;
    sh:group fields:2232cd10-01d6-4f67-966a-2c22932437b4 .

fields:82258a58-6c67-4b0a-a26d-0676b88886ad a form:Field ;
    mu:uuid "82258a58-6c67-4b0a-a26d-0676b88886ad";
    sh:name "Achternaam contactpersoon" ;
    sh:order 31 ;
    sh:path ( schema:contactPoint foaf:familyName ) ;
    form:displayType displayTypes:defaultInput ;
    sh:group fields:2232cd10-01d6-4f67-966a-2c22932437b4 .

fields:6285341d-a0ad-4933-bb5f-c49016b0f935 a form:Field ;
    mu:uuid "6285341d-a0ad-4933-bb5f-c49016b0f935";
    sh:name "Telefoonnummer" ;
    sh:order 32 ;
    sh:path ( schema:contactPoint schema:telephone ) ;
    form:displayType displayTypes:defaultInput ;
    sh:group fields:2232cd10-01d6-4f67-966a-2c22932437b4 .

fields:31c743c7-b243-4ca7-a6c1-dc5f03cb5afb a form:Field ;
    mu:uuid "31c743c7-b243-4ca7-a6c1-dc5f03cb5afb";
    sh:name "Mailadres" ;
    sh:order 33 ;
    sh:path ( schema:contactPoint schema:email ) ;
    form:displayType displayTypes:defaultInput ;
    sh:group fields:2232cd10-01d6-4f67-966a-2c22932437b4 .

##########################################################
# Bank account
##########################################################

fields:e0ac9843-3482-4277-9113-e21b76841d36 a form:Field ;
    mu:uuid "e0ac9843-3482-4277-9113-e21b76841d36";
    sh:name "Mag de subsidie uitbetaald worden op het bankrekeningnummer waarop het aandeel in het Gemeentefonds wordt gestort?" ;
    sh:order 40 ;
    sh:path lblodSubsidie:canBePaidOnKnownBankAccount ;
    form:displayType displayTypes:switch ;
    sh:group fields:386530d7-b4b4-41c9-8146-e2d8d629d77f ;
    form:hasConditionalFieldGroup fields:a72abfc0-8593-4fd9-a959-321861646ed6. ## Bank account info

fields:a72abfc0-8593-4fd9-a959-321861646ed6 a form:ConditionalFieldGroup ;
    mu:uuid "a72abfc0-8593-4fd9-a959-321861646ed6";
    form:conditions
      [ a form:ExactValueConstraint ;
        form:grouping form:MatchSome ;
        form:customValue "1" ;
        sh:path lblodSubsidie:canBePaidOnKnownBankAccount
      ] ;
    form:hasFieldGroup fieldGroups:d06d0596-5c51-4ac3-8e4b-f8f9be7797da .

fieldGroups:d06d0596-5c51-4ac3-8e4b-f8f9be7797da a form:FieldGroup;
    mu:uuid "d06d0596-5c51-4ac3-8e4b-f8f9be7797da" ;
    form:hasField
                ### Bank account number ###
                fields:9b706641-f834-4f91-87ab-d490f7aa0ed7 ,

                ### Confirmation letter ###
                fields:5f2ae097-ce97-4a52-a5db-501cf9e114c4 .

                ### Type RemoteDataObject or FileDataObject ###
                #fields:ccb94821-be31-43fa-87df-ef64e3c4ce45 .

fields:9b706641-f834-4f91-87ab-d490f7aa0ed7 a form:Field ;
    mu:uuid "9b706641-f834-4f91-87ab-d490f7aa0ed7";
    sh:name "Alternatief rekeningnummer uitbetaling" ;
    form:help "IBAN: BE00 0000 0000 0000" ;
    sh:order 41 ;
    sh:path ( schema:bankAccount schema:identifier ) ;
    form:displayType displayTypes:defaultInput ;
    sh:group fields:386530d7-b4b4-41c9-8146-e2d8d629d77f .

fields:5f2ae097-ce97-4a52-a5db-501cf9e114c4 a form:Field ;
    mu:uuid "5f2ae097-ce97-4a52-a5db-501cf9e114c4";
    sh:name "Voeg een bevestingsbrief dat dit rekeningnummer gebruikt mag worden toe, ondertekend door de burgemeester en medeondertekend door de financieel directeur." ;
    sh:order 42 ;
    sh:path ( schema:bankAccount dct:hasPart ) ;
    form:displayType displayTypes:files ;
    sh:group fields:386530d7-b4b4-41c9-8146-e2d8d629d77f .

##########################################################
# Hidden field required for all variations of URL or FILE
# input field which require validation.
# It makes sure there is a type attached to hasPart object.
# This enables correct validation in both front and backend.
##########################################################

fields:ccb94821-be31-43fa-87df-ef64e3c4ce45 a form:Field ;
    mu:uuid "ccb94821-be31-43fa-87df-ef64e3c4ce45" ;
    sh:name "Type RemoteDataObject or FileDataObject [hidden input]" ;
    sh:order 43 ;
    sh:path ( schema:bankAccount dct:hasPart rdf:type );
    sh:group fields:aDynamicPropertyGroup .

##########################################################
# Application form
##########################################################

fields:9462b7b4-313a-4eae-bedd-079811219dcb a form:Field ;
    mu:uuid "9462b7b4-313a-4eae-bedd-079811219dcb";
    sh:order 50 ;
    sh:path lblodSubsidie:applicationFormTable ;
    form:displayType displayTypes:applicationFormTable ;
    sh:group fields:7e84b8db-1198-4585-a0a2-e5bc48af3f08  .


##########################################################
# Field groups
##########################################################

fieldGroups:main a form:FieldGroup ;
    mu:uuid "70eebdf0-14dc-47f7-85df-e1cfd41c3855" ;
    form:hasField

        ### First name contact person
        fields:e19e245a-c24b-4fb5-84b8-a7e2744ce9a0 ,

        ### First name contact person
        fields:82258a58-6c67-4b0a-a26d-0676b88886ad ,

        ### Phone
        fields:6285341d-a0ad-4933-bb5f-c49016b0f935 ,

        ### Email
        fields:31c743c7-b243-4ca7-a6c1-dc5f03cb5afb ,

        ### Can be paid on known bank account ?
        fields:e0ac9843-3482-4277-9113-e21b76841d36 ,

        ### Application form table
        fields:9462b7b4-313a-4eae-bedd-079811219dcb .

form:6b70a6f0-cce2-4afe-81f5-5911f45b0b27 a form:Form ;
    mu:uuid "6b70a6f0-cce2-4afe-81f5-5911f45b0b27" ;
    form:hasFieldGroup fieldGroups:main .

fields:aDynamicPropertyGroup a form:PropertyGroup ;
    mu:uuid "88acfa64-07f0-41a5-a111-072ea3c94fbc" ;
    sh:description "A dynamic property group" ;
    sh:order 3 ;
    sh:name "aDynamicPropertyGroup".